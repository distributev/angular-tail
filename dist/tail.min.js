var config={service_url:"http://localhost:3001",socketio_url:"http://localhost:2000"};angular.module("myApp",[]).controller("appController",["$scope","SocketService",function(t,n){t.tail={watch:{persistent:!0,recursive:!1,encoding:"UTF8"},fromBeginning:!1,follow:!0},t.$watch("[tail.watch.persistent,tail.watch.recursive,tail.watch.encoding]",function(n){void 0!==n&&(t.watchOptions=t.tail.watch)})}]),angular.module("myApp").factory("SocketService",["$rootScope",function(t){var n=null,e=[],o=null,i={connect:function(i,r){n||(n=io.connect(config.socketio_url),n.on("connect",function(i){n.on("new lines",function(n){o=n.data,e.push(n.data),t.$apply()})}))},getSocket:function(){return n},getLines:function(){return e},getOneLine:function(){return o}};return i}]),angular.module("myApp").factory("TailService",["$http",function(t){var n=config.service_url+"/tail";return{tail:function(e){var o=n;return t({method:"POST",url:o,data:e,headers:{"Content-type":"application/json"}})},untail:function(e){var o=n;return t({method:"DELETE",url:o})},writeFile:function(e){var o=n+"/write";return t({method:"POST",url:o,data:e,headers:{"Content-type":"application/json"}})}}}]),angular.module("myApp").directive("tail",function(){return{restrict:"E",replace:!0,templateUrl:"js/directive/views/tail.html",scope:{filePath:"=",lineSeparator:"=",fromBeginning:"=",watchOptions:"=",follow:"=?"},controller:["$scope","SocketService","TailService",function(t,n,e){t.lineSeparator=t.lineSeparator?t.lineSeparator:"/[\r]{0,1}\n/",t.fromBeginning=void 0===t.fromBeginning?!1:t.fromBeginning,t.watchOptions=void 0===t.watchOptions?{}:t.watchOptions,t.follow=void 0===t.follow?!0:t.follow,t.SocketService=n,n.connect(),t.watch=function(){e.tail({option:{lineSeparator:t.lineSeparator,fromBeginning:t.fromBeginning,watchOptions:t.watchOptions,follow:t.follow},filePath:t.filePath})},t.unwatch=function(){e.untail().then(function(t){})},t.writeFile=function(){e.writeFile({filePath:t.filePath})}}]}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyIsImNvbnRyb2xsZXIvYXBwQ29udHJvbGxlci5qcyIsInNlcnZpY2VzL3NlcnZpY2Uuc29ja2V0LmpzIiwic2VydmljZXMvc2VydmljZS50YWlsLmpzIiwiZGlyZWN0aXZlL3RhaWwuanMiXSwibmFtZXMiOlsiY29uZmlnIiwic2VydmljZV91cmwiLCJzb2NrZXRpb191cmwiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIlNvY2tldFNlcnZpY2UiLCJ0YWlsIiwid2F0Y2giLCJwZXJzaXN0ZW50IiwicmVjdXJzaXZlIiwiZW5jb2RpbmciLCJmcm9tQmVnaW5uaW5nIiwiZm9sbG93IiwiJHdhdGNoIiwibmV3VmFsIiwidW5kZWZpbmVkIiwid2F0Y2hPcHRpb25zIiwiZmFjdG9yeSIsIiRyb290U2NvcGUiLCJzb2NrZXQiLCJsaW5lcyIsImxpbmUiLCJzb2NrZXRTZXJ2aWNlIiwiY29ubmVjdCIsInByb2ZpbGUiLCJ0b2tlbiIsImlvIiwib24iLCJkYXRhIiwicHVzaCIsIiRhcHBseSIsImdldFNvY2tldCIsImdldExpbmVzIiwiZ2V0T25lTGluZSIsIiRodHRwIiwiYmFzZV91cmwiLCJ1cmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiQ29udGVudC10eXBlIiwidW50YWlsIiwicXVlcnkiLCJ3cml0ZUZpbGUiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJ0ZW1wbGF0ZVVybCIsInNjb3BlIiwiZmlsZVBhdGgiLCJsaW5lU2VwYXJhdG9yIiwiVGFpbFNlcnZpY2UiLCJvcHRpb24iLCJ1bndhdGNoIiwidGhlbiIsInJlc3VsdCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsU0FDQUMsWUFBQSx3QkFDQUMsYUFBQSx3QkNGQUMsU0FBQUMsT0FBQSxZQUNBQyxXQUFBLGlCQUFBLFNBQUEsZ0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQUUsTUFDQUMsT0FDQUMsWUFBQSxFQUNBQyxXQUFBLEVBQ0FDLFNBQUEsUUFFQUMsZUFBQSxFQUNBQyxRQUFBLEdBSUFSLEVBQUFTLE9BQUEsbUVBQUEsU0FBQUMsR0FDQUMsU0FBQUQsSUFDQVYsRUFBQVksYUFBQVosRUFBQUUsS0FBQUMsWUNmQU4sUUFBQUMsT0FBQSxTQUFBZSxRQUFBLGlCQUFBLGFBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBLEtBQ0FDLEtBQ0FDLEVBQUEsS0FFQUMsR0FDQUMsUUFBQSxTQUFBQyxFQUFBQyxHQUNBTixJQUNBQSxFQUFBTyxHQUFBSCxRQUFBekIsT0FBQUUsY0FDQW1CLEVBQUFRLEdBQUEsVUFBQSxTQUFBQyxHQUNBVCxFQUFBUSxHQUFBLFlBQUEsU0FBQUMsR0FDQVAsRUFBQU8sRUFBQUEsS0FDQVIsRUFBQVMsS0FBQUQsRUFBQUEsTUFDQVYsRUFBQVksZUFPQUMsVUFBQSxXQUNBLE1BQUFaLElBRUFhLFNBQUEsV0FDQSxNQUFBWixJQUVBYSxXQUFBLFdBQ0EsTUFBQVosSUFJQSxPQUFBQyxNQy9CQXJCLFFBQUFDLE9BQUEsU0FDQWUsUUFBQSxlQUFBLFFBQUEsU0FBQWlCLEdBQ0EsR0FBQUMsR0FBQXJDLE9BQUFDLFlBQUEsT0FDQSxRQUNBTyxLQUFBLFNBQUFzQixHQUNBLEdBQUFRLEdBQUFELENBQ0EsT0FBQUQsSUFDQUcsT0FBQSxPQUNBRCxJQUFBQSxFQUNBUixLQUFBQSxFQUNBVSxTQUNBQyxlQUFBLHVCQUlBQyxPQUFBLFNBQUFDLEdBQ0EsR0FBQUwsR0FBQUQsQ0FDQSxPQUFBRCxJQUNBRyxPQUFBLFNBQ0FELElBQUFBLEtBR0FNLFVBQUEsU0FBQWQsR0FDQSxHQUFBUSxHQUFBRCxFQUFBLFFBQ0EsT0FBQUQsSUFDQUcsT0FBQSxPQUNBRCxJQUFBQSxFQUNBUixLQUFBQSxFQUNBVSxTQUNBQyxlQUFBLDJCQzdCQXRDLFFBQUFDLE9BQUEsU0FBQXlDLFVBQUEsT0FBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQUMsU0FBQSxFQUNBQyxZQUFBLCtCQUNBQyxPQUFBQyxTQUFBLElBQUFDLGNBQUEsSUFBQXRDLGNBQUEsSUFBQUssYUFBQSxJQUFBSixPQUFBLE1BQ0FULFlBQUEsU0FBQSxnQkFBQSxjQUFBLFNBQUFDLEVBQUFDLEVBQUE2QyxHQUNBOUMsRUFBQTZDLGNBQUE3QyxFQUFBNkMsY0FBQTdDLEVBQUE2QyxjQUFBLGdCQUNBN0MsRUFBQU8sY0FBQUksU0FBQVgsRUFBQU8sZUFBQSxFQUFBUCxFQUFBTyxjQUNBUCxFQUFBWSxhQUFBRCxTQUFBWCxFQUFBWSxnQkFBQVosRUFBQVksYUFDQVosRUFBQVEsT0FBQUcsU0FBQVgsRUFBQVEsUUFBQSxFQUFBUixFQUFBUSxPQUVBUixFQUFBQyxjQUFBQSxFQUNBQSxFQUFBa0IsVUFJQW5CLEVBQUFHLE1BQUEsV0FDQTJDLEVBQUE1QyxNQUFBNkMsUUFBQUYsY0FBQTdDLEVBQUE2QyxjQUFBdEMsY0FBQVAsRUFBQU8sY0FBQUssYUFBQVosRUFBQVksYUFBQUosT0FBQVIsRUFBQVEsUUFBQW9DLFNBQUE1QyxFQUFBNEMsWUFHQTVDLEVBQUFnRCxRQUFBLFdBQ0FGLEVBQUFWLFNBQUFhLEtBQUEsU0FBQUMsT0FLQWxELEVBQUFzQyxVQUFBLFdBQ0FRLEVBQUFSLFdBQUFNLFNBQUE1QyxFQUFBNEMiLCJmaWxlIjoidGFpbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY29uZmlnPXtcclxuXHRzZXJ2aWNlX3VybDonaHR0cDovL2xvY2FsaG9zdDozMDAxJyxcclxuXHRzb2NrZXRpb191cmw6J2h0dHA6Ly9sb2NhbGhvc3Q6MjAwMCdcclxufTsiLCJhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLFtdKVxyXG4gIC5jb250cm9sbGVyKCdhcHBDb250cm9sbGVyJywgWyckc2NvcGUnLCdTb2NrZXRTZXJ2aWNlJyxmdW5jdGlvbigkc2NvcGUsU29ja2V0U2VydmljZSkge1xyXG4gICAgJHNjb3BlLnRhaWwgPSB7XHJcbiAgICAgIHdhdGNoOntcclxuICAgICAgICBwZXJzaXN0ZW50OnRydWUsXHJcbiAgICAgICAgcmVjdXJzaXZlOmZhbHNlLFxyXG4gICAgICAgIGVuY29kaW5nOlwiVVRGOFwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGZyb21CZWdpbm5pbmc6ZmFsc2UsXHJcbiAgICAgIGZvbGxvdzp0cnVlXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAkc2NvcGUuJHdhdGNoKFwiW3RhaWwud2F0Y2gucGVyc2lzdGVudCx0YWlsLndhdGNoLnJlY3Vyc2l2ZSx0YWlsLndhdGNoLmVuY29kaW5nXVwiLGZ1bmN0aW9uKG5ld1ZhbCl7XHJcbiAgICAgIGlmKG5ld1ZhbCAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAkc2NvcGUud2F0Y2hPcHRpb25zID0gJHNjb3BlLnRhaWwud2F0Y2g7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdteUFwcCcpLmZhY3RvcnkoJ1NvY2tldFNlcnZpY2UnLFsnJHJvb3RTY29wZScsZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcblx0IHZhciBzb2NrZXQgPSBudWxsO1xyXG5cdCB2YXIgbGluZXMgPSBbXTtcclxuXHQgdmFyIGxpbmUgPSBudWxsO1xyXG5cdCBcclxuXHQgdmFyIHNvY2tldFNlcnZpY2UgPSB7XHJcblx0IFx0Y29ubmVjdDpmdW5jdGlvbihwcm9maWxlLHRva2VuKXtcclxuXHQgXHRcdGlmKCFzb2NrZXQpe1xyXG5cdFx0IFx0XHRzb2NrZXQgPSBpby5jb25uZWN0KGNvbmZpZy5zb2NrZXRpb191cmwpO1xyXG5cdFx0IFx0XHRzb2NrZXQub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbiAoZGF0YSkge1x0XHRcclxuXHRcdCBcdFx0XHRzb2NrZXQub24oJ25ldyBsaW5lcycsZnVuY3Rpb24oZGF0YSl7XHJcblx0XHQgXHRcdFx0XHRsaW5lID0gZGF0YS5kYXRhO1xyXG5cdFx0XHRcdFx0XHRsaW5lcy5wdXNoKGRhdGEuZGF0YSk7XHRcclxuXHRcdFx0XHRcdFx0JHJvb3RTY29wZS4kYXBwbHkoKTsgXHJcblx0XHRcdFx0XHR9KTtcdCAgIFxyXG5cdFx0XHRcclxuXHRcdFx0ICAgIH0pO1xyXG5cclxuXHRcdCAgICB9XHJcblx0IFx0fSxcclxuXHQgXHRnZXRTb2NrZXQ6ZnVuY3Rpb24oKXtcclxuXHQgXHRcdHJldHVybiBzb2NrZXQ7XHJcblx0IFx0fSxcclxuXHQgXHRnZXRMaW5lczpmdW5jdGlvbigpe1xyXG5cdCBcdFx0cmV0dXJuIGxpbmVzO1xyXG5cdCBcdH0sXHJcblx0IFx0Z2V0T25lTGluZTogZnVuY3Rpb24oKXtcclxuXHQgXHQgXHRyZXR1cm4gbGluZTtcclxuXHQgXHR9LFxyXG5cdCB9O1xyXG5cclxuXHQgcmV0dXJuIHNvY2tldFNlcnZpY2U7XHJcbn1dKTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ215QXBwJylcclxuICAgIC5mYWN0b3J5KCdUYWlsU2VydmljZScsWyckaHR0cCcsZnVuY3Rpb24oJGh0dHApe1xyXG4gICAgXHR2YXIgYmFzZV91cmw9Y29uZmlnLnNlcnZpY2VfdXJsKycvdGFpbCc7XHJcbiAgICBcdHJldHVybiB7XHJcbiAgICAgICAgICAgIHRhaWw6ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsPWJhc2VfdXJsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDp1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTpkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC10eXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdW50YWlsOmZ1bmN0aW9uKHF1ZXJ5KXtcclxuICAgICAgICAgICAgICAgIHZhciB1cmw9YmFzZV91cmw7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDonREVMRVRFJyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6dXJsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgd3JpdGVGaWxlOmZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybD1iYXNlX3VybCsnL3dyaXRlJztcclxuICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6dXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7ICAgIFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXHJcblxyXG4gICAgXHR9O1xyXG4gICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdteUFwcCcpLmRpcmVjdGl2ZSgndGFpbCcsZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6J0UnLCAgIFxyXG4gICAgICAgIHJlcGxhY2U6dHJ1ZSwgICBcclxuICAgICAgICB0ZW1wbGF0ZVVybDonanMvZGlyZWN0aXZlL3ZpZXdzL3RhaWwuaHRtbCcsXHJcbiAgICAgICAgc2NvcGU6IHtmaWxlUGF0aDonPScsbGluZVNlcGFyYXRvcjogJz0nLGZyb21CZWdpbm5pbmc6ICc9Jyx3YXRjaE9wdGlvbnM6ICc9Jyxmb2xsb3c6ICc9Pyd9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywnU29ja2V0U2VydmljZScsJ1RhaWxTZXJ2aWNlJyxmdW5jdGlvbigkc2NvcGUsU29ja2V0U2VydmljZSxUYWlsU2VydmljZSl7XHJcbiAgICAgICAgICAgICRzY29wZS5saW5lU2VwYXJhdG9yID0gJHNjb3BlLmxpbmVTZXBhcmF0b3I/JHNjb3BlLmxpbmVTZXBhcmF0b3I6XCIvW1xccl17MCwxfVxcbi9cIjtcclxuICAgICAgICAgICAgJHNjb3BlLmZyb21CZWdpbm5pbmcgPSAkc2NvcGUuZnJvbUJlZ2lubmluZyA9PT0gdW5kZWZpbmVkP2ZhbHNlOiRzY29wZS5mcm9tQmVnaW5uaW5nO1xyXG4gICAgICAgICAgICAkc2NvcGUud2F0Y2hPcHRpb25zID0gJHNjb3BlLndhdGNoT3B0aW9ucyA9PT0gdW5kZWZpbmVkP3t9OiRzY29wZS53YXRjaE9wdGlvbnM7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xsb3cgPSAkc2NvcGUuZm9sbG93ID09PSB1bmRlZmluZWQ/dHJ1ZTokc2NvcGUuZm9sbG93O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLlNvY2tldFNlcnZpY2U9U29ja2V0U2VydmljZTtcclxuICAgICAgICAgICAgU29ja2V0U2VydmljZS5jb25uZWN0KCk7XHJcblxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLndhdGNoID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBUYWlsU2VydmljZS50YWlsKHtvcHRpb246IHtsaW5lU2VwYXJhdG9yOiAkc2NvcGUubGluZVNlcGFyYXRvciwgZnJvbUJlZ2lubmluZzogJHNjb3BlLmZyb21CZWdpbm5pbmcsIHdhdGNoT3B0aW9uczogJHNjb3BlLndhdGNoT3B0aW9ucywgZm9sbG93OiAkc2NvcGUuZm9sbG93fSxmaWxlUGF0aDokc2NvcGUuZmlsZVBhdGh9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS51bndhdGNoID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIFRhaWxTZXJ2aWNlLnVudGFpbCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS53cml0ZUZpbGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgVGFpbFNlcnZpY2Uud3JpdGVGaWxlKHtmaWxlUGF0aDokc2NvcGUuZmlsZVBhdGh9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcblxyXG5cclxuICAgIH1dXHJcbn07XHJcbn0pO1xyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
